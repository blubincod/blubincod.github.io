---
layout: page
title: "Next JS ê¸°ì´ˆ"
author: author1
comments: true
description: >
hide_description: true
sitemap: true
---
* this unordered seed list will be replaced by toc as unordered list 
{:toc}

# Next JS

## íŠ¹ì§•

### pre-rendering
- JSê³¼ React JSê°€ ë¡œë”©ë˜ì§€ ì•Šì•„ë„ ì½˜í…Œì¸ ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.<br>

<small>ğŸ’¡ React JSëŠ” ë¨¼ì € ë¹ˆ í˜ì´ì§€ê°€ ë‚˜ì˜¤ê³  ë¡œë”©ì´ ëë‚˜ì•¼ ì½˜í…ì¸ ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.</small>

### ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ í”„ë ˆì„ì›Œí¬ì˜ ì°¨ì´

ë¼ì´ë¸ŒëŸ¬ë¦¬ 
- ë‚´ê°€ ì›í•˜ëŠ” ëŒ€ë¡œ ì‚¬ìš©

í”„ë ˆì„ì›Œí¬ 
- í˜•ì‹ì— ë§ì¶° ì‚¬ìš©
<hr>

## ì‚¬ìš©í•˜ê¸°
### í”„ë¡œì íŠ¸ ìƒì„±
```py
npx create-next-app@latest
```

ê¸°ë³¸
`/pages/about.js`
```js
export default function Hello() {
    return "Hello:)";
}
```
=>  ë¼ìš°í„° ì§ì ‘ êµ¬ì„±í•˜ì§€ ì•Šê³  íŒŒì¼ëª…ìœ¼ë¡œ ê²½ë¡œë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.<br>

JSX
`/pages/about.js`
```js
export default function Hello() {
  return (
    <div>
      <h1>Hello JSX</h1>
    </div>
  );
}
```
<hr>

### ë„¤ë¹„ê²Œì´íŒ…
#### Link
ğŸ’¡ ë„¤ë¹„ê²Œì´íŒ… í•  ë•Œ `<a>` anchor íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ìœ 
=> `<a>`ëŠ” ì´ë™í•˜ë©´ì„œ í˜ì´ì§€ ì „ì²´ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì—¬ ëŠë ¤ì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. 

Navgation Bar ìƒì„±
`/components/NavBar.js`
```js
import Link from "next/link";

export default function NavBar() {
  return (
    <nav>
      <Link href="/">Home</Link>
      <Link href="/about">About</Link>
    </nav>
  );
}
```

NavBar ì‚¬ìš©í•˜ê¸°
`/pages/index.js`
```js
import Link from "next/link";

export default function NavBar() {
  return (
    <nav>
      <Link href="/">
        <a>Home</a>
      </Link>
      <Link href="/about">
        <a style={% raw %}{{ color: "red" }}{{% endraw %}}>About</a>
      </Link>
    </nav>
  );
}
```
âš ï¸ `Link`ëŠ” styleì´ë‚˜ classNameì„ ì ìš©í•˜ì§€ ëª»í•˜ê¸° ë•Œë¬¸ì— ì•ˆì— `<a>`ë¥¼ ë„£ì–´ì¤€ë‹¤.
<hr>

### useRouter
- í˜ì´ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.

```js
import Link from "next/link";
import { useRouter } from "next/router";

export default function NavBar() {
  const router = useRouter();
  return (
    <nav>
      <Link href="/">
        <a>Home</a>
      </Link>
      <Link href="/about">
        <a style={% raw %}{{ color: "red" }}{% endraw %}>About</a>
      </Link>
    </nav>
  );
}
```
ì½˜ì†” ê²°ê³¼
```py
Object { pathname: "/", route: "/", query: {}, asPath: "/", components: {â€¦}, isFallback: false, basePath: "", locale: undefined, locales: undefined, defaultLocale: undefined, â€¦ }
```
<hr>

## css
`/components/NavBar.module.css`
```js
import Link from "next/link";
import { useRouter } from "next/router";
import styles from "./NavBar.module.css";

export default function NavBar() {
  const router = useRouter();
  console.log(router);
  return (
    <nav className={styles.nav}>
      <Link href="/">
        <a style={% raw %}{{ color: router.pathname === "/" ? "red" : "black" }}{% endraw %}>Home</a>
      </Link>
      <Link href="/about">
        <a style={% raw %}{{ color: router.pathname === "/about" ? "red" : "black" }}{% endraw %}>About</a>
      </Link>
    </nav>
  );
}
```

### className 2ê°œ ì´ìƒ ì‚¬ìš©í•˜ê¸°
ë°©ë²• 1. ë°±í‹±
```js
<Link href="/">
  <a className={`${styles.link} ${router.pathname === "/" ? styles.active : ""}`}>Home</a>
</Link>
```
ë°©ë²• 2. join
```js
<Link href="/">
  <a className={[styles.link, router.pathname === "/" ? styles.active : ""].join(" ")}>Home</a>
</Link>
```
<hr>

### jsx style
```js
<style jsx>{`
        nav {
          display: flex;
          justify-content: space-around;
          background-color: beige;
        }
        a {
          text-decoration: none;
        }
        .active {
          color: red;
          font-size: 24px;
        }
      `}</style>
```

### jsx global style
íŒŒì¼ í˜•ì‹
ex. `_app.js`
- ì„œë²„ ìš”ì²­ì´ ì™”ì„ ë•Œ ê°€ì¥ ë¨¼ì € ì‹¤í–‰ë˜ëŠ” ì»´í¬ë„ŒíŠ¸(ê³µí†µ ë ˆì´ì•„ì›ƒ)

`_app.js`
```js
import NavBar from "../components/NavBar";

export default function App({ Component, pageProps }) {
  return (
    <>
      <NavBar />
      <Component {...pageProps} />;
      <style jsx global>{`
        a {
          color: blue;
        }
      `}</style>
    </>
  );
}
```
ğŸ’¡Component : ìš”ì²­í•œ í˜ì´ì§€
ğŸ’¡pageProps : getInitialProsë¥¼ í†µí•´ ë‚´ë ¤ë°›ì€ props
<hr>

## Fetching Data

`public` í´ë” 
- `public` í´ë”ì— ìˆìœ¼ë©´ ë”°ë¡œ ê²½ë¡œ ì„¤ì • ì—†ì´ ë°”ë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤.
ex. 
```js
<img src="vercel.svg">
```
<hr>

## APIí‚¤ ìˆ¨ê¸°ê¸° (Redirect & Rewrite)
### redirects
- URLì— ì†ŒìŠ¤ë¥¼ ì…ë ¥í•˜ë©´ destinationìœ¼ë¡œ redirect í•´ì¤€ë‹¤.
`next.config.js`
```js
module.exports = {
  reactStrictMode: false,
  async redirect() {
    return [
      {
        source: "/old-blog",
        destination: "/new-blog",
        permanent: false,
      },
    ];
  },
};
```
ğŸ’¡premanent :   

### rewrites
- ìœ„ì˜ redirectsì™€ ë™ì¼í•˜ë‚˜ destinationì„ ë³´ì—¬ì£¼ì§€ ì•ŠëŠ”ë‹¤.(Masking)
`next.config.js`
```js
module.exports = {
  reactStrictMode: false,
  async rewrite() {
    return [
      {
        source: "/api/movies",
        destination: `https://api.themoviedb.org/3/movie/popular?api_key=${API_KEY}`,
      },
    ];
  },
};
```
<hr>

## Server Side Rendering
- loading í™”ë©´ ì—†ì´ ëª¨ë“  ì²˜ë¦¬ê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦° í›„ ëª¨ë“  ì •ë³´ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ì‚¬ìš©
- pageë¥¼ ë°›ì•„ì˜¤ê¸° ì „ì— propsë¥¼ ë°›ì•„ì˜¤ëŠ” function

ğŸ’¡ ì˜¤ì§ ë°±ì—”ë“œì—ì„œë§Œ ì‹¤í–‰ëœë‹¤.

```js
export default function Home({ results }) {
  return (
    <div className="container">
      <Seo title="Home" />
      {results?.map((movie) => (
        <div className="movie" key={movie.id}>
          <img src={`https://image.tmdb.org/t/p/w500/${movie.poster_path}`} />
          <h4>{movie.original_title}</h4>
        </div>
      ))}
    </div>
  );
}

export async function getServerSideProps() {
  const { results } = await (await fetch(`http://localhost:3000/api/movies`)).json();
  return {
    props: {
      results,
    },
  };
}
```
=> server sideë¥¼ í†µí•´ propsë¥¼ pageë¡œ ë³´ë‚¸ë‹¤.
<hr>
ğŸ’¡Seo(Search Engine Optimization)<br>
- ê²€ìƒ‰ ì—”ì§„ ìµœì í™”ë¡œ ì¸ë±ì‹±í•˜ëŠ”ë° ë„ì›€ì„ ì£¼ëŠ” ë°©ì‹ì´ë‹¤.
<hr>

## Dynamic Routes
http://localhost:3000/movies ì ‘ì†
`/pages/movies/index.js` //root í˜ì´ì§€

http://localhost:3000/movies/all ì ‘ì†
`/pages/movies/all.js`

http://localhost:3000/movies/1 ì ‘ì†
`/pages/movies/[id].js`
```js
import { useRouter } from "next/router";

export default function Detail() {
  const router = useRouter();
  console.log(router);
  return "detail";
}
```
=> `console.log(router)`ì—ì„œ query: Object { id: "1" }ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.

```js
  const router = useRouter();
  const onClick = (id) => {
    router.push(
      {
        pathname: `/movies/${id}`,
        query: {
          title: "hello",
        },
      },
      `/movies/${id}`
    );
  };
  return (
    <div className="container">
      <Seo title="Home" />
      {results?.map((movie) => (
        <Link href={`/movies/${movie.id}`} key={movie.id}>
          <div className="movie" onClick={() => onClick(movie.id)}>
            <img src={`https://image.tmdb.org/t/p/w500/${movie.poster_path}`} />
            <h4>{movie.original_title}</h4>
          </div>
        </Link>
      ))}
      ...
```
=> `/movies/${id}`ë¥¼ ë„£ì–´ì£¼ë©´ masking í•˜ì—¬ queryë¥¼ ê°€ë ¤ì¤€ë‹¤.

`/pages/movies/[...id].js` //object í˜•ì‹ìœ¼ë¡œ queryë¥¼ ë³´ì—¬ì¤Œ<br>
`/pages/movies/[...params].js` //paramsë¥¼ ë³´ì—¬ì¤Œ<br>
```js
import { useRouter } from "next/router";

export default function Detail() {
  const router = useRouter();
  console.log(router);
  const [title, id] = router.query.params || [];
  return (
    <div className="id">
      <h2>{title}</h2>
      <style jsx>
        {`
          .id h2 {
            color: white;
          }
        `}
      </style>
    </div>
  );
}
```
<hr>

### Catch All

Seoë¥¼ ìµœì í™”í•˜ê¸° ìœ„í•´ getServerSideProps ì‚¬ìš©

ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ routerë¥¼ ì‚¬ìš©í•˜ë©´ routerëŠ” í”„ë¡ íŠ¸ì—ì„œë§Œ ì‹¤í–‰ì´ ë˜ì§€ë§Œ<br>
getServerSideProps í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ **ë³´ë¥˜**

## 404 ì—ëŸ¬
- ì˜ëª»ëœ url ì…ë ¥ ì‹œ ë³´ì—¬ì¤„ í˜ì´ì§€

`/pages/404.js`

