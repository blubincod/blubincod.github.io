---
layout: post
title:  "COPY"
related_posts: [studylog]
date:   2024-05-14 08:45:00 +0900
categories: [studylog, documentation]
description: >
  MariaDBë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™í•˜ê¸°.
cover:  true
image: 
  path: /assets/img/posts/devlog/mariadb-foundation-logo.jpg
---

* this unordered seed list will be replaced by the toc
{:toc}

## ì•Œì•„ë‘ê¸°
### ORM (Object Relational Mapping)
<hr>

> ê°ì²´ ê´€ê³„ ë§¤í•‘ì„ ì˜ë¯¸í•˜ë©°, ê°ì²´ì™€ RDB(Relational Database)ì˜ í…Œì´ë¸”ì„ ìë™ìœ¼ë¡œ ë§¤í•‘í•˜ëŠ” ë°©ë²•.
{:.lead}
ğŸ’¡ ê°ì²´ì§€í–¥ ì–¸ì–´ì—ì„œì˜ ê°ì²´ëŠ” í´ë˜ìŠ¤ë¥¼ ì˜ë¯¸í•œë‹¤.
{:.note title="note"}
### JPA (Java Persistence API)
> ìë°” ì§„ì˜ì˜ ORM ê¸°ìˆ  í‘œì¤€ìœ¼ë¡œ ì±„íƒëœ ì¸í„°í˜ì´ìŠ¤ ëª¨ìŒ.
{:.lead}
### Hibernate
> ìë°”ì˜ ORM í”„ë ˆì„ì›Œí¬ë¡œ, JPAê°€ ì •ì˜í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê³  ìˆëŠ” JPA êµ¬í˜„ì²´ ì¤‘ í•˜ë‚˜.
{:.lead}

## ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™í•˜ê¸°
<hr>

```md 
ê°œë°œ í™˜ê²½
Developer Tools : Lombok, Spring Configuration Processor
Web             : Spring Web
SQL             : Spring JPA, MariaDB Driver
```
### í”„ë¡œì íŠ¸ ì„¤ì •
`file: resources/application.properties`
```py
spring.datasource.driverClassName=org.mariadb.jdbc.Driver
spring.datasource.url=jdbc:mariadb://localhost:3306/springboot
spring.datasource.username=root

spring.jpa.hibernate.ddl-auto=create
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
```
application.properties
{:.figcaption}

### 1. ì—”í‹°í‹° ì„¤ê³„
<hr>

ì—”í‹°í‹°(Entity)<br>
&emsp;Spring Data JPAë¥¼ ì‚¬ìš©í•˜ì—¬ ì§ì ‘ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ì§€ ì•Šê³  ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì„ ìƒì„±í•˜ê²Œ í•˜ëŠ” ê²ƒ.
{:.note title="info"}

```java
@Entity: í•´ë‹¹ í´ë˜ìŠ¤ê°€ ì—”í‹°í‹°ì„ì„ ëª…ì‹œí•˜ê¸° ìœ„í•´ ì‚¬ìš©.
@Table: í´ë˜ìŠ¤ ì´ë¦„ê³¼ í…Œì´ë¸”ì˜ ì´ë¦„ì´ ë‹¤ë¥´ê²Œ ì§€ì •ë˜ì–´ì•¼ í•˜ëŠ” ê²½ìš° ì‚¬ìš©.
@Id: ì„ ì–¸ëœ í•„ë“œëŠ” í…Œì´ë¸”ì˜ ê¸°ë³¸ê°’ ì—­í• ë¡œ ì‚¬ìš©.

@GeneratedValue: '@Id'ì™€ í•¨ê»˜ ì‚¬ìš©ë˜ë©°, í•´ë‹¹ í•„ë“œì˜ ê°’ì„ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ìë™ìœ¼ë¡œ ìƒì„±í• ì§€ ê²°ì •í•  ë•Œ ì‚¬ìš©.
    - AUTO: ê¸°ë³¸ê°’ìœ¼ë¡œ, ë°ì´í„°ë² ì´ìŠ¤ì— ë§ê²Œ ìë™ ìƒì„±.
    - IDENTITY: AUTO_INCREMENTë¥¼ ì‚¬ìš©í•´ ê¸°ë³¸ê°’ ìƒì„±.
    - SEQUENCE: '@SequenceGenerator' ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì‹ë³„ì ìƒì„±ê¸°ë¥¼ ìƒì„±í•˜ê³  ê°’ì„ ìë™ ì£¼ì… ë°›ìŒ.
    - TABLE: ì–´ë–¤ DBMSë¥¼ ì‚¬ìš©í•˜ë”ë¼ë„ ë™ì¼í•˜ê²Œ ë™ì‘í•˜ê¸°ë¥¼ ì›í•  ê²½ìš° ì‚¬ìš©.
 
@Transient: ì„ ì–¸ëœ í•„ë“œë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œëŠ” ì´ìš©í•˜ê³  ì‹¶ì§€ ì•Šì„ ê²½ìš° ì‚¬ìš©.

@Column: ì—”í‹°í‹° í´ë˜ìŠ¤ì˜ í•„ë“œëŠ” ìë™ìœ¼ë¡œ í…Œì´ë¸” ì¹¼ëŸ¼ìœ¼ë¡œ ë§¤í•‘.
    - nullable: ë ˆì½”ë“œë¥¼ ìƒì„±í•  ë•Œ ì¹¼ëŸ¼ ê°’ì— null ì²˜ë¦¬ê°€ ê°€ëŠ¥í•œì§€ë¥¼ ëª…ì‹œ.
```

### 2. ë ˆí¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„
<hr>

### 3. ë ˆí¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤ ìƒì„±
<hr>

ë ˆí¬ì§€í† ë¦¬ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ì ‘ê·¼í•˜ë ¤ëŠ” í…Œì´ë¸”ê³¼ ë§¤í•‘ë˜ëŠ” ì—”í‹°í‹°ì— ëŒ€í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  `JpaRepository` ìƒì†ë°›ê¸°
{:.note title=""}
```java
public interface ProductRepository extends JpaRepository<Product, Long> {

}
```
ë ˆí¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤
{:.figcaption}

```java
public interface JpaRepository<T, ID> extends PagingAndSortingRepository<T, ID>,
QueryByExampleExecutor<T> {
    List<T> findAll();
    
    List<T> findAll();
    
    List<> findAllById(Iterable<ID> ids);
    
    ... 
```
JPARepositoryì—ì„œ ì œê³µí•˜ëŠ” ê¸°ë³¸ ë©”ì„œë“œ ì¼ë¶€
{:.figcaption}

```java
// ì—”í‹°í‹° ê´€ë ¨ ì–´ë…¸í…Œì´ì…˜(anotation)
@Etity
@Table(name = "product")
public class Product {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTIRY)
    private long number;
    
    @Column(nullable =false)
    private String name;
    
    @Column(nullable =false)
    private Integer price;
    
    private LocalDateTime createdAt;
    
}
```
ì—”í‹°í‹° í´ë˜ìŠ¤
{:.figcaption}


### 4. DAO ì„¤ê³„
<hr>

DAO(Data Acess Object)<br>
&emsp;DBì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ë¡œì§ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê°ì²´, ë¡œì§ì˜ ë™ì‘ ê³¼ì •ì—ì„œ ë°ì´í„°ë¥¼ ì¡°ì‘í•˜ëŠ” ê¸°ëŠ¥ ìˆ˜í–‰.
{:.note title="info"}
ğŸ’¡ DAO í´ë˜ìŠ¤ëŠ” ì¼ë°˜ì ìœ¼ë¡œ `ì¸í„°í˜ì´ìŠ¤ - êµ¬í˜„ì²´` êµ¬ì„±ìœ¼ë¡œ ìƒì„±.
{:.note}
DAO
{:.lead}
```java
public interface ProductDAO {
    
    Product addProduct(Product product);
    
    Product selectProduct(Long number);
    
    Product updateProductName(Long number, String name) throws Exception;
    
    Product deleteProduct(Long number) throws Exception;
    
}
```
DAO ì¸í„°í˜ì´ìŠ¤
{:.figcaption}

```java
public class ProductDAOImpl implements ProductDAO {
    
    private final ProductRepository productRepository;
    
    @Autowired
    public ProductDAOImpl(ProductRepository productRepository) {
        this.productRepository = productRepository;
    }
    
    @Override
    public Product insertProduct(Product product) {
        return null;
    }
    
    ...
```
DAO ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ í´ë˜ìŠ¤ ì¼ë¶€
{:.figcaption}
### 5. DAO ì—°ë™ì„ ìœ„í•œ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ì„œë¹„ìŠ¤ ì„¤ê³„
<hr>
> ì„¤ê³„í•œ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ê³¼ ì—°ê²°í•˜ê¸° ìœ„í•´ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ì„œë¹„ìŠ¤ ìƒì„±.
{:.lead}
DTO
{:.lead}

```java
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
public class ProductDto {
    
    private String name;
    private int price;
    private int stock;
    
}
```
ProductDto í´ë˜ìŠ¤
{:.figcaption}

Service
{:.lead}

```java
public interface ProductService {
    
    ProductResponseDto getProduct(Long number);
    
    ProductResponseDto saveProduct(ProductDto productDto);
    
    ProductResponseDto changeProductName(Long number, String name) throws Exception;
    
    void deleteProduct(ProductDto productDto) throws Exception;
    
}
```
ProductService ì¸í„°í˜ì´ìŠ¤
{:.figcaption}

```java
public class ProductServiceImpl implements ProductService {
    
    private final ProductDAO productDAO;
    
    ProductResponseDto saveProduct(ProductDto productDto);
    
    ProductResponseDto changeProductName(Long number, String name) throws Exception;
    
    void deleteProduct(ProductDto productDto) throws Exception;
    
}
```
ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ ProductServiceImpl í´ë˜ìŠ¤
{:.figcaption}

Controller
{:.lead}

```java
@RestController
@RequestMapping("/product")
public class ProductController {
    
    private final ProductService productservice;
    
    @Autowired
    public ProductController(ProductService productService) {
        this.productService = productService;
    }
    
    @GetMapping()
    public ResponseEntity<ProductResponseDto> getProduct(Long number) {
        ProductResponseDto productResponseDto = productService.getProduct(number);
        
        return ResponseEntity.status(HttpStatus.OK).body(productResponseDto);
    }
    
    @PostMapping()
    ...
    
    @PutMapping()
    ...
    
    @DeleteMapping()
    ...
    
}
```
ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ ProductServiceImpl í´ë˜ìŠ¤
{:.figcaption}

### 6. Swagger APIë¥¼ ì´ìš©í•˜ì—¬ ë™ì‘ í™•ì¸
![image](/assets/img/posts/devlog/useSwagger.jpeg)
<hr>

## ë” ì•Œì•„ë³´ê¸°
<hr>
- Lombokì— ëŒ€í•´ ì•Œì•„ë³´ê¸°

<hr>
<a href="https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=296591989" target=_blank>ğŸ“– ìŠ¤í”„ë§ ë¶€íŠ¸ í•µì‹¬ ê°€ì´ë“œ</a> ì±…ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.