---
layout: post
title:  "λ°μ΄ν„°λ² μ΄μ¤ μ—°λ™"
related_posts: [devlog]
date:   2024-05-12 08:46:00 +0900
categories: [devlog]
description: >
  MariaDBλ¥Ό μ‚¬μ©ν•μ—¬ λ°μ΄ν„°λ² μ΄μ¤ μ—°λ™ν•κΈ°.
cover:  true
image: 
  path: /assets/img/posts/devlog/mariadb-foundation-logo.jpg
---

* this unordered seed list will be replaced by the toc
{:toc}

## μ•μ•„λ‘κΈ°
### ORM (Object Relational Mapping)
> κ°μ²΄ κ΄€κ³„ λ§¤ν•‘μ„ μλ―Έν•λ©°, κ°μ²΄μ™€ RDB(Relational Database)μ ν…μ΄λΈ”μ„ μλ™μΌλ΅ λ§¤ν•‘ν•λ” λ°©λ²•.
{:.lead}
π’΅ κ°μ²΄μ§€ν–¥ μ–Έμ–΄μ—μ„μ κ°μ²΄λ” ν΄λμ¤λ¥Ό μλ―Έν•λ‹¤.
{:.note title="note"}
### JPA (Java Persistence API)
> μλ°” μ§„μμ ORM κΈ°μ  ν‘μ¤€μΌλ΅ μ±„νƒλ μΈν„°νμ΄μ¤ λ¨μ.
{:.lead}
### Hibernate
> μλ°”μ ORM ν”„λ μ„μ›ν¬λ΅, JPAκ°€ μ •μν•λ” μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•κ³  μλ” JPA κµ¬ν„μ²΄ μ¤‘ ν•λ‚.
{:.lead}

## λ°μ΄ν„°λ² μ΄μ¤ μ—°λ™ν•κΈ°
```md 
κ°λ° ν™κ²½
Developer Tools : Lombok, Spring Configuration Processor
Web             : Spring Web
SQL             : Spring JPA, MariaDB Driver
```
### ν”„λ΅μ νΈ μ„¤μ •
`file: resources/application.properties`
```py
spring.datasource.driverClassName=org.mariadb.jdbc.Driver
spring.datasource.url=jdbc:mariadb://localhost:3306/springboot
spring.datasource.username=root

spring.jpa.hibernate.ddl-auto=create
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
```
application.properties
{:.figcaption}

### 1. μ—”ν‹°ν‹° μ„¤κ³„
μ—”ν‹°ν‹°(Entity)<br>
&emsp;Spring Data JPAλ¥Ό μ‚¬μ©ν•μ—¬ μ§μ ‘ μΏΌλ¦¬λ¥Ό μ‘μ„±ν•μ§€ μ•κ³  λ°μ΄ν„°λ² μ΄μ¤ ν…μ΄λΈ”μ„ μƒμ„±ν•κ² ν•λ” κ²ƒ.
{:.note title="info"}

```java
@Entity: ν•΄λ‹Ή ν΄λμ¤κ°€ μ—”ν‹°ν‹°μ„μ„ λ…μ‹ν•κΈ° μ„ν•΄ μ‚¬μ©.
@Table: ν΄λμ¤ μ΄λ¦„κ³Ό ν…μ΄λΈ”μ μ΄λ¦„μ΄ λ‹¤λ¥΄κ² μ§€μ •λμ–΄μ•Ό ν•λ” κ²½μ° μ‚¬μ©.
@Id: μ„ μ–Έλ ν•„λ“λ” ν…μ΄λΈ”μ κΈ°λ³Έκ°’ μ—­ν• λ΅ μ‚¬μ©.

@GeneratedValue: '@Id'μ™€ ν•¨κ» μ‚¬μ©λλ©°, ν•΄λ‹Ή ν•„λ“μ κ°’μ„ μ–΄λ–¤ λ°©μ‹μΌλ΅ μλ™μΌλ΅ μƒμ„±ν• μ§€ κ²°μ •ν•  λ• μ‚¬μ©.
    - AUTO: κΈ°λ³Έκ°’μΌλ΅, λ°μ΄ν„°λ² μ΄μ¤μ— λ§κ² μλ™ μƒμ„±.
    - IDENTITY: AUTO_INCREMENTλ¥Ό μ‚¬μ©ν•΄ κΈ°λ³Έκ°’ μƒμ„±.
    - SEQUENCE: '@SequenceGenerator' μ–΄λ…Έν…μ΄μ…μΌλ΅ μ‹λ³„μ μƒμ„±κΈ°λ¥Ό μƒμ„±ν•κ³  κ°’μ„ μλ™ μ£Όμ… λ°›μ.
    - TABLE: μ–΄λ–¤ DBMSλ¥Ό μ‚¬μ©ν•λ”λΌλ„ λ™μΌν•κ² λ™μ‘ν•κΈ°λ¥Ό μ›ν•  κ²½μ° μ‚¬μ©.
 
@Transient: μ„ μ–Έλ ν•„λ“λ¥Ό λ°μ΄ν„°λ² μ΄μ¤μ—μ„λ” μ΄μ©ν•κ³  μ‹¶μ§€ μ•μ„ κ²½μ° μ‚¬μ©.

@Column: μ—”ν‹°ν‹° ν΄λμ¤μ ν•„λ“λ” μλ™μΌλ΅ ν…μ΄λΈ” μΉΌλΌμΌλ΅ λ§¤ν•‘.
    - nullable: λ μ½”λ“λ¥Ό μƒμ„±ν•  λ• μΉΌλΌ κ°’μ— null μ²λ¦¬κ°€ κ°€λ¥ν•μ§€λ¥Ό λ…μ‹.
```

### 2. λ ν¬μ§€ν† λ¦¬ μΈν„°νμ΄μ¤ μ„¤κ³„
### 3. λ ν¬μ§€ν† λ¦¬ μΈν„°νμ΄μ¤ μƒμ„±
λ ν¬μ§€ν† λ¦¬λ¥Ό μƒμ„±ν•κΈ° μ„ν•΄ μ ‘κ·Όν•λ ¤λ” ν…μ΄λΈ”κ³Ό λ§¤ν•‘λλ” μ—”ν‹°ν‹°μ— λ€ν• μΈν„°νμ΄μ¤λ¥Ό μƒμ„±ν•κ³  `JpaRepository` μƒμ†λ°›κΈ°
{:.note title=""}
```java
public interface ProductRepository extends JpaRepository<Product, Long> {

}
```
λ ν¬μ§€ν† λ¦¬ μΈν„°νμ΄μ¤
{:.figcaption}

```java
public interface JpaRepository<T, ID> extends PagingAndSortingRepository<T, ID>,
QueryByExampleExecutor<T> {
    List<T> findAll();
    
    List<T> findAll();
    
    List<> findAllById(Iterable<ID> ids);
    
    ... 
```
JPARepositoryμ—μ„ μ κ³µν•λ” κΈ°λ³Έ λ©”μ„λ“ μΌλ¶€
{:.figcaption}

```java
// μ—”ν‹°ν‹° κ΄€λ ¨ μ–΄λ…Έν…μ΄μ…(anotation)
@Etity
@Table(name = "product")
public class Product {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTIRY)
    private long number;
    
    @Column(nullable =false)
    private String name;
    
    @Column(nullable =false)
    private Integer price;
    
    private LocalDateTime createdAt;
}
```
μ—”ν‹°ν‹° ν΄λμ¤
{:.figcaption}


### 4. DAO μ„¤κ³„
DAO(Data Acess Object)<br>
&emsp;DBμ— μ ‘κ·Όν•κΈ° μ„ν• λ΅μ§μ„ κ΄€λ¦¬ν•κΈ° μ„ν• κ°μ²΄, λ΅μ§μ λ™μ‘ κ³Όμ •μ—μ„ λ°μ΄ν„°λ¥Ό μ΅°μ‘ν•λ” κΈ°λ¥ μν–‰.
{:.note title="info"}
π’΅ DAO ν΄λμ¤λ” μΌλ°μ μΌλ΅ `μΈν„°νμ΄μ¤ - κµ¬ν„μ²΄` κµ¬μ„±μΌλ΅ μƒμ„±.
{:.note}

```java
public interface ProductDAO {
    Member addProduct(Product product);
}
```
DAO μΈν„°νμ΄μ¤
{:.figcaption}

```java
public class ProductDAOImpl implements ProductDAO {
    
    private final ProductRepository productRepository;
    
    @Autowired
    public ProductDAOImpl(ProductRepository productRepository) {
        this.productRepository = productRepository;
    }
    
    @Override
    public Product insertProduct(Product product) {
        return null;
    }
    
    ...
```
DAO μΈν„°νμ΄μ¤μ κµ¬ν„μ²΄ ν΄λμ¤
{:.figcaption}
### 5. DAO μ—°λ™μ„ μ„ν• μ»¨νΈλ΅¤λ¬μ™€ μ„λΉ„μ¤ μ„¤κ³„


You can add a note.
{:.note}

A custom label.
{:.note title="Attention"}

You can add large text.
{:.lead}

> You can make a quote "pop out".
{:.lead}

I'm faded, faded, faded.
{:.faded}

An optional caption for a table
{:.figcaption}

<hr>
