---
layout: page
title: "Recoil"
author: author1
comments: true
description: >
hide_description: true
sitemap: true
---

* this unordered seed list will be replaced by toc as unordered list 
{:toc}

![Recoil](/assets/study/react_Image/recoil_logo.png)
# Recoilì´ë€?
- stateë¥¼ atomì— ë„£ì–´ì„œ ê´€ë¦¬í•˜ê²Œ í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬.<br>

Recoil ì›ë¦¬ ì˜ˆì‹œ<br>
![Atoms](/assets/study/react_Image/recoil-atoms.png)
## Global State ë¬¸ì œì 
![Global Stateì˜ ë¬¸ì œì ](/assets/study/react_Image/global-state.png)<br>
ìœ„ì™€ ê°™ì´ Global Stateë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” valueë¥¼ ì´ìš©í•˜ë ¤ë©´ ì—°ê²°ëœ Componentë§ˆë‹¤<br>valueë¥¼ ë¶€ì—¬í•´ì•¼ í–ˆì§€ë§Œ Recoilì„ í†µí•˜ì—¬ valueë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.<br>

ì´ë¯¸ì§€ ì¶œì²˜: <a href="https://www.youtube.com/watch?v=_ISAA_Jt9kI&t=280s" target="_blank">React Europe Youtube</a>
### Global State ì˜ˆì‹œ
![Global State Ex1](/assets/study/react_Image/recoil/globalStateEx1.png)
![Global State Ex2](/assets/study/react_Image/recoil/globalStateEx2.png)
![Global State Ex3](/assets/study/react_Image/recoil/globalStateEx3.png)
![Global State Ex4](/assets/study/react_Image/recoil/globalStateEx4.png)
## Recoil ì‚¬ìš©í•˜ê¸°(with atom)
ğŸ› ï¸ `npm install recoil`

> atoms.ts
```js
import { atom } from "recoil";

export const isDarkAtom = atom({
  key: "isDark",
  default: true,
});
```

> index.tsx
```js
root.render(
  <RecoilRoot>
    <QueryClientProvider client={queryClient}>
      <App />
    </QueryClientProvider>
  </RecoilRoot>
);
```

> chart.tsx
```js
function Chart({ coinId }: ChartProps) {
  const isDark = useRecoilValue(isDarkAtom);
  const { isLoading, data } = useQuery<IHistorical[]>(["ohlcv", coinId], () =>
    fetchCoinHistory(coinId)
  );

  return (
    ...
  )}
```

### value ìˆ˜ì •í•˜ê¸° : useSetRecoilState()
```js
function Coins({}: ICoinsProps) {
  const setDarkAtom = useSetRecoilState(isDarkAtom);
  const toggleDarkAtom = () => setDarkAtom((prev) => !prev);
  const { isLoading, data } = useQuery<ICoin[]>(["allCoins"], fetchCoins);
  return (
    <Container>
      <Helmet>
        <title>To the Moon â˜½</title>
      </Helmet>
      <Header>
        <Title>To the Moon â˜½</Title>
        <button onClick={toggleDarkAtom}>Ligth/Dark Mode</button>
      </Header>
      ...
  )
}
```
=> useStateì™€ ë¹„ìŠ·í•˜ê²Œ "useSetRecoilState"ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.<br>
âš ï¸ Atomì€ í•¨ìˆ˜ì¸ ê²ƒì„ ìœ ì˜í•˜ì!
<hr>

### useRecoilState
### useRecoilValue

## Selector
- stateë¥¼ ì…ë ¥ ë°›ì€ ê²ƒì„ ë³€í˜•í•´ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜.

### get
- ì›í•˜ëŠ” atomì„ ê°€ì ¸ ì˜¬ ìˆ˜ ìˆë‹¤.
### set
- stateë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆê²Œ í•œë‹¤.
```js
export const minuteState = atom({
  key: "minutes",
  default: 0,
});

export const hourSelector = selector({
  key: "hours",
  get: ({ get }) => {
    const minutes = get(minuteState);
    return minutes * 60;
  },
  set: ({ set }, newValue) => {
    const minutes = Number(newValue) / 60;
    set(minuteState, minutes);
  },
});

function TimeConverter() {
  const [minutes, setMinutes] = useRecoilState(minuteState);
  const [hours, setHours] = useRecoilState(hourSelector);
  const onMinutesChange = (event: React.FormEvent<HTMLInputElement>) =>
    setMinutes(+event.currentTarget.value);
  const onHoursChange = (event: React.FormEvent<HTMLInputElement>) =>
    setHours(+event.currentTarget.value);

  return (
    <div>
      <h1>Time Converter</h1>
      Hours
      <input
        value={minutes}
        onChange={onMinutesChange}
        type="number"
        placeholder="ì‹œê°„"
      />
      Minutes
      <input
        value={hours}
        onChange={onHoursChange}
        type="number"
        placeholder="ë¶„"
      />
    </div>
  );
}
```
## Recoil Persist
- Local Storageì— ì €ì¥í•˜ëŠ” ê²ƒì„ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬.

