---
layout: page
title: "í’€ìŠ¤íƒ ë§›ë³´ê¸°10-Webpack"
author: author1
comments: true
description: >
hide_description: true
sitemap: true
---

* this unordered seed list will be replaced by toc as unordered list 
{:toc}

# Webpack
- ëª¨ë“  íŒŒì¼ì„ ë°›ì•„ì„œ í•˜ë‚˜ì˜ íŒŒì¼ë¡œ ì••ì¶•í•´ì£¼ëŠ” ëª¨ë“ˆ ë²ˆë“¤ëŸ¬(Module bundler)ì´ë‹¤.

ğŸ’¡ë²ˆë“¤ëŸ¬(bundler): ì—¬ëŸ¬ ê°œì˜ íŒŒì¼ì„ í•˜ë‚˜ë¡œ ë¬¶ì–´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.
ex) Webpack, parcel...

<link target="_blank" src="https://webpack.js.org/concepts/"> https://webpack.js.org/concepts/

`npm i webpack webpack-cli -D`

webpack.config.js ìƒì„±
```js
module.exports = {
  entry: "./src/client/js/main.js",
  output: {
    filename: "main.js",
    path: "./assets/js",
  },
};
```

## rules

### loader
`npm i babel-loader -D`

```js
const path = require("path");

module.exports = {
  entry: "./src/client/js/main.js",
  output: {
    filename: "main.js",
    path: path.resolve(__dirname, "assets", "js"),
  },
  module: {
    usles: [
      {
        test: /\.js$/,
        use: {
          loader: "babel-loader",
          options: {
            presets: [["@babel/preset-env", { targets: "defaults" }]],
          },
        },
      },
    ],
  },
};
```
#### mode ì„¤ì •

development: ê°œë°œ ëª¨ë“œ
production : 

modeë¥¼ developmentë¡œ ì„¤ì •
```js
...
module.exports = {
  entry: "./src/client/js/main.js",
  mode: "development",
  output: {
    filename: "main.js",
    path: path.resolve(__dirname, "assets", "js"),
  },
...
```
=> ì´ì „ì²˜ëŸ¼ ì½”ë“œë¥¼ ì••ì¶•í•˜ì§€ ì•ŠëŠ”ë‹¤.

### loader

`npm install sass-loader -D`
=> scssë¥¼ ê°€ì ¸ë‹¤ê°€ ì¼ë°˜ cssë¡œ ì „í™˜ ì‹œì¼œì¤€ë‹¤.

`npm install -D css-loader`
=> importì™€ URLì„ í’€ì–´ì„œ í•´ì„í•´ì¤€ë‹¤.

`npm install -D style-loader`
=> cssë¥¼ DOMì— ì£¼ì…í•œë‹¤.

```js
  module: {
    rules: [
      {
        test: /\.js$/,
        use: {
          loader: "babel-loader",
          options: {
            presets: [["@babel/preset-env", { targets: "defaults" }]],
          },
        },
      },
      {
        test: /\.scss$/,
        use: ["style-loader", "css-loader", "sass-loader"],
      },
    ],
  },
};
```
â­â­â­
ì‚¬ìš© ìˆœì„œ: sass-loader -> css-loader -> style-loader


### Mini Css Extract Plugin
- í•´ë‹¹ ì½”ë“œë¥¼ ë‹¤ë¥¸ íŒŒì¼ë¡œ ë¶„ë¦¬ì‹œí‚¨ë‹¤.

ğŸ”§ `npm i -D mini-css-extract-plugin`

```js
const MiniCssExtractPlugin = require("mini-css-extract-plugin");
const path = require("path");

module.exports = {
  entry: "./src/client/js/main.js",
  plugins: [new MiniCssExtractPlugin()],
  mode: "development",
  output: {
    filename: "main.js",
    path: path.resolve(__dirname, "assets", "js"),
  },
  module: {
    rules: [
      {
        test: /\.js$/,
        use: {
          loader: "babel-loader",
          options: {
            presets: [["@babel/preset-env", { targets: "defaults" }]],
          },
        },
      },
      {
        test: /\.scss$/,
        use: [MiniCssExtractPlugin.loader, "css-loader", "sass-loader"],
      },
    ],
  },
};

```

assets/jsì— `main.js`ì™€ `main.css`ê°€ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
=> cssë¥¼ ë‹¤ë¥¸ ê³³ì— ìœ„ì¹˜ì‹œí‚¨ë‹¤.

#### output ë³€ê²½í•˜ê¸°

```js
...
module.exports = {
  entry: "./src/client/js/main.js",
  plugins: [
    new MiniCssExtractPlugin({
      filename: "css/styles.css",
    }),
  ],
  mode: "development",
  output: {
    filename: "js/main.js",
    path: path.resolve(__dirname, "assets"),
  },
...
```
=> íŒŒì¼ ìƒì„± ê²°ê³¼
assets
    â†³ css
        â†³ styles.css
    â†³ js
        â†³ main.js

### ìë™ refresh & compile
**watch**
- client íŒŒì¼ë“¤ì„ watch í•˜ì—¬ ë³€ê²½ì´ ìˆì„ ë•Œ refreshì™€ compileì„ ë‹¤ì‹œ í•´ì¤€ë‹¤.

```js
module.exports = {
  entry: "./src/client/js/main.js",
  mode: "development",
  watch: true,
  plugins: [
    new MiniCssExtractPlugin({
      filename: "css/styles.css",
    }),
  ],
   output: {
    filename: "js/main.js",
    path: path.resolve(__dirname, "assets"),
    clean: true,
  },
...
```

ğŸ’¡ clean: true //ê¸°ì¡´ íŒŒì¼ì„ ì‚­ì œ í•´ì¤€ë‹¤.

#### nodemon.json
- nodemonì˜ ì¬ì‹œì‘ì„ ë§‰ì•„ì¤€ë‹¤.

`nodemon.json`
```js
{
  "ignore": ["webpack.config.js", "src/client/*", "assets/*"],
  "exec": "babel-node src/init.js"
}
```
`packge.json`
```js
...
"scripts": {
    "dev": "nodemon -L",
    "assets": "webpack --config webpack.config.cjs"
  },
...
```